SQL> 		set echo on
SQL>    		alter session set nls_date_format='yymmddhh24miss';

Session altered.

SQL>    		@tmp/insert_file.9142318.0800.3657.tmp.sql
SQL> insert into file_crontab_command_files values ('ls1','20130426080000','maindatalife','/smartmon/maindatalife', ''||chr(35)||''||chr(33)||'/bin/sh
  2  ');

1 row created.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'workdir="./"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'checkdate='||chr(96)||'date +"'||chr(37)||'Y'||chr(37)||'m'||chr(37)||'d'||chr(37)||'H"'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $'||chr(35)||' -gt 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'workdir=$1
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cd $workdir
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'workdir="$workdir/workarea"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(33)||' -d $workdir ]]'||chr(59)||'then mkdir $workdir '||chr(59)||' fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpruser='||chr(96)||'id -un'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'ps -ef|awk ''{if($1=="''$tmpruser''"){for(i=2'||chr(59)||'i<NF'||chr(59)||'i++)printf $i" "'||chr(59)||'print $NF}}''|grep "sh "|grep "maindatalife"|grep -v grep|wc -l|awk ''{print $1}'''||chr(96)||' -gt 2 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo wait for another process to complete
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit 9
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $'||chr(35)||' -gt 1 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'checkdate=$2
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'debug=no
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$3" '||chr(33)||'= "" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'debug=yes
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f ~/.profile ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'. ~/.profile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'elif [[ -f ~/.bash_profile ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'. ~/.bash_profile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_conn_cfg_file=db_conn.cfg
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'alert_db_conn='||chr(96)||'awk ''{if($1=="alert"){for(i=2'||chr(59)||'i<NF'||chr(59)||'i++)printf $i" "'||chr(59)||'print $NF}}'' $db_conn_cfg_file'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'report_db_conn='||chr(96)||'awk ''{if($1=="report"){for(i=2'||chr(59)||'i<NF'||chr(59)||'i++)printf $i" "'||chr(59)||'print $NF}}'' $db_conn_cfg_file'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cmd_config_file=cmd.cfg
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'alert_datalife_hourly=2
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'alert_datalife_daily=2
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'datalife_hourly_forward=12
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'datalife_daily_forward=2
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(35)||''||chr(35)||''||chr(35)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild=no
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'_start_time='||chr(96)||'date +"'||chr(37)||'s"'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for target in alert report '||chr(59)||' do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_conn=$alert_db_conn
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$target" == "report" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_conn=$report_db_conn
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpfile=$workdir/maintaindatalife.'||chr(96)||'date +"'||chr(37)||'Y'||chr(37)||'m'||chr(37)||'d'||chr(37)||'H'||chr(37)||'M"'||chr(96)||'.$$.tmp
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f ${tmpfile}*
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'sqlscript=${tmpfile}.$target.sql
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tablelist=${tmpfile}.$target.tblist
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'columnlist=${tmpfile}.$target.collist
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set lines 1000
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set pages 1000
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set feedback off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set serveroutput off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set heading off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool $tablelist
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'select table_name from user_tables order by table_name'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool $columnlist
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'select table_name, column_name, data_type , data_length from user_tab_columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'where table_name in (select table_name from user_tables) order by table_name, column_id'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'cat $tablelist |grep -i "configurations" |wc -l|awk ''{print $1}'''||chr(96)||' -eq 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'create table configurations (
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'HOST_NAME VARCHAR2(30),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'CREATE_TIME DATE,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'CHECK_TIME DATE,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'SUBCLASS VARCHAR2(200),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'CONF_NAME VARCHAR2(200),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'VALUE VARCHAR2(200) )'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'cat $tablelist |grep -i "conf_modifications" |wc -l|awk ''{print $1}'''||chr(96)||' -eq 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'create table conf_modifications (
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'HOST_NAME VARCHAR2(30),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'MODIFY_TIME DATE,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'SUBCLASS VARCHAR2(200),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'CONF_NAME VARCHAR2(200),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'OLD_VALUE VARCHAR2(200),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'NEW_VALUE VARCHAR2(200) )'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'cat $tablelist |grep -i "alerts" |wc -l|awk ''{print $1}'''||chr(96)||' -eq 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'create table alerts(
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'alert_time date,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'group_name varchar2(30),
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'message varchar2(200)
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||')'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'cat $tablelist |grep -i "check_datetime" |wc -l|awk ''{print $1}'''||chr(96)||' -eq 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'create table check_datetime (
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'host_name varchar2(30) unique,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'agent_time date,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'server_time date,
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'difference number)'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for table_name in '||chr(96)||'awk ''{if($1=="tabdef")print $2}'' FS="'||chr(59)||'" $cmd_config_file'||chr(96)||''||chr(59)||' do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tabdef_line='||chr(96)||'awk ''{if($1=="tabdef" '||chr(38)||''||chr(38)||' $2=="''$table_name''")print}'' FS="'||chr(59)||'" $cmd_config_file'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'columns='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f 3'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'partitioned='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f 4'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'hourly='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f 5'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$target" == "alert" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'hourly=1
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'datalife='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f 6'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpi='||chr(96)||'expr $columns + 6'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'column_def='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f 7-$tmpi'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpi='||chr(96)||'expr $tmpi + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'index_def='||chr(96)||'echo "$tabdef_line"|cut -d"'||chr(59)||'" -f ${tmpi}-'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild=no
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $table_name
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $column_def
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $index_def
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'unique_def=""
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$index_def" '||chr(33)||'= "" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'unique_def='||chr(96)||'echo $index_def|awk ''{for(i=1'||chr(59)||'i<=NF'||chr(59)||'i++){if(substr($i,1,7)=="unique=")print substr($i,9,length($i)-9)}}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$unique_def" '||chr(33)||'= "" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'unique_def="host_name,$unique_def"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "unique constraint: $unique_def"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'awk ''{if(tolower($1)==tolower("''$table_name''"))print "a"'||chr(59)||' else print "b"}'' $tablelist|grep "a"|wc -l|awk ''{print $1}'''||chr(96)||' == 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "Create Table $table_name in $target Database"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "create table $table_name (" >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " host_name	  varchar2(30) , ">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " check_time	  date ,">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for col in '||chr(96)||'echo "$column_def"|tr "'||chr(59)||'" " "'||chr(96)||''||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'col_name='||chr(96)||'echo $col|cut -d"=" -f 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'col_type='||chr(96)||'echo $col|cut -d"=" -f 2'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $i == $columns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$unique_def" '||chr(33)||'= "" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " $col_name	  $col_type ," >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " unique ( $unique_def ) )">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " $col_name	  $col_type )" >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " $col_name	  $col_type ," >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $partitioned == 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "'||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " partition by range (check_time) (">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'starttime=$checkdate
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'timeformat="YYYYMMDDHH24"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $hourly == 0 ]]'||chr(59)||'then '||chr(35)||'daily
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'starttime='||chr(96)||'echo $checkdate|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'timeformat="YYYYMMDD"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " partition pmin values less than (to_date(''$starttime'',''$timeformat'')),">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'part_count=2
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $hourly == 1 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'part_count=$datalife_hourly_forward
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'part_count=$datalife_daily_forward
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$starttime
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'partname=$starttime
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $i -lt $part_count ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour="00"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $hourly == 1 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$tmphour" == "24" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour="0"${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=${tmpdate}${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$tmpdate
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $i '||chr(33)||'= $part_count ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " partition p$partname values less than (to_date(''$tmpstr'',''$timeformat'')),">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo " partition p$partname values less than (to_date(''$tmpstr'',''$timeformat'')))'||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'partname=$tmpstr
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo Checking columns definition.
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $columnlist|awk ''{if(tolower($1)==tolower("''$table_name''")){
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'printf tolower($2)" "tolower($3)'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if(tolower($3)=="varchar2") print "("$4")"'||chr(59)||' else print ""'||chr(59)||'}}''|sed ''1,2d'' >$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'columns_db='||chr(96)||'wc -l $tmpfile|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'droppedcolumns=$tmpfile.droped.columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'modifiedcolumns=$tmpfile.modified.columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'leftcolumns=$tmpfile.left.columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'addedcolumns=$tmpfile.added.columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $droppedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $leftcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $addedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $i -lt $columns_db ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'line='||chr(96)||'head -$i $tmpfile|tail -1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_column_name='||chr(96)||'echo $line|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_column_type='||chr(96)||'echo $line|awk ''{print $2}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr="${db_column_name}=${db_column_type}"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'echo $column_def|awk ''{for(i=1'||chr(59)||'i<=NF'||chr(59)||'i++)if(tolower($i)=="''$tmpstr''")print "a"'||chr(59)||' else print "b"'||chr(59)||'}'' FS="'||chr(59)||'"|grep "a"|wc -l|awk ''{print $1}'''||chr(96)||' == 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'echo $column_def|awk ''{for(i=1'||chr(59)||'i<=NF'||chr(59)||'i++)if(tolower(substr($i,1,index($i,"=")-1))=="''$db_column_name''")print "a"'||chr(59)||'else print "b"'||chr(59)||'}'' FS="'||chr(59)||'"|grep "a"|wc -l|awk ''{print $1}'''||chr(96)||' == 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$db_column_name" >>$droppedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$db_column_name" >>$modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$db_column_name" >>$leftcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$db_column_name" >>$leftcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for column in '||chr(96)||'echo $column_def|tr "'||chr(59)||'" " "'||chr(96)||''||chr(59)||' do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'column_name='||chr(96)||'echo $column|awk ''{print tolower($1)}'' FS="="'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'column_type='||chr(96)||'echo $column|awk ''{print tolower($2)}'' FS="="'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'awk ''{if($1=="''$column_name''")print "a"'||chr(59)||'else print "b"'||chr(59)||'}'' $tmpfile|grep "a"|wc -l|awk ''{print $1}'''||chr(96)||' == 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$column_name $column_type" >> $addedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'new_modifiedcolumns=$tmpfile.newmodifiedcolumns'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $new_modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $modifiedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for column in '||chr(96)||'cat $modifiedcolumns'||chr(96)||''||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'defined_column_type='||chr(96)||'echo $column_def|awk ''{for(i=1'||chr(59)||'i<=NF'||chr(59)||'i++)if(tolower(substr($i,1,index($i,"=")-1))=="''$column''")print tolower(substr($i,index($i,"=")+1))}'' FS="'||chr(59)||'"|tail -1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_column_type='||chr(96)||'awk ''{if($1=="''$column''")print $2}'' $tmpfile'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'defined_column_length='||chr(96)||'echo $defined_column_type|tr "(" " "|tr ")" " "|awk ''{if(NF>1)print $2'||chr(59)||'else print "0"'||chr(59)||'}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_column_length='||chr(96)||'echo $db_column_type|tr "(" " "|tr ")" " "|awk ''{if(NF>1)print $2'||chr(59)||'else print "0"'||chr(59)||'}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmp_defined_column_type=$defined_column_type
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'defined_column_type='||chr(96)||'echo $defined_column_type|tr "(" " "|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'db_column_type='||chr(96)||'echo $db_column_type|tr "(" " "|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $defined_column_type $defined_column_length
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $db_column_type $db_column_length
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $db_column_type '||chr(33)||'= "varchar2" || $defined_column_type '||chr(33)||'= "varchar2" || $db_column_length -ge $defined_column_length ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild=yes
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "$column $tmp_defined_column_type" >> $new_modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $new_modifiedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'mv $new_modifiedcolumns $modifiedcolumns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'left_columns='||chr(96)||'wc -l $leftcolumns|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'for column in '||chr(96)||'echo $column_def|awk ''{for(i=1'||chr(59)||'i<=NF'||chr(59)||'i++)print substr($i,1,index($i,"=")-1)}'' FS="'||chr(59)||'"'||chr(96)||''||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $i -le $left_columns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $column '||chr(33)||'= '||chr(96)||'head -$i $leftcolumns|tail -1'||chr(96)||' ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild=yes
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo $needrebuild
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $needrebuild == "no" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $droppedcolumns || -f $modifiedcolumns || -f $addedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $droppedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $droppedcolumns|sed "s/^/alter table $table_name set unused column /'||chr(59)||' s/$/'||chr(59)||'/" >>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name drop unused columns'||chr(59)||'">>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $modifiedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $modifiedcolumns|sed "s/^/alter table $table_name modify /'||chr(59)||' s/$/'||chr(59)||'/" >>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ -f $addedcolumns ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $addedcolumns|sed "s/^/alter table $table_name add /'||chr(59)||' s/$/'||chr(59)||'/" >>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $tmpfile >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm -f $tmpfile.*.columns
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo Checking data life.
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'parts_indb=$tmpfile.indb.parts
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn << '||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set feedback off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set serveroutput off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set echo off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set heading off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set pages 9999
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set lines 100
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool $parts_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'select ''xXx'', lower(partition_name) from user_tab_partitions
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'where lower(table_name)=(''$table_name'') order by partition_name'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'spool off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'awk ''{if($1=="xXx" '||chr(38)||''||chr(38)||' $2'||chr(33)||'="pmin")print $2}'' $parts_indb >$tmpfile '||chr(38)||''||chr(38)||' mv $tmpfile $parts_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'parts_indb_cnt='||chr(96)||'wc -l $parts_indb|awk ''{print $1}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $partitioned == "1" '||chr(38)||''||chr(38)||' $parts_indb_cnt == "0" || $partitioned == "0" '||chr(38)||''||chr(38)||' $parts_indb_cnt -gt 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild="yes"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'elif [[ $partitioned == "1" '||chr(38)||''||chr(38)||' $parts_indb_cnt -gt 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'part_name_length='||chr(96)||'awk ''{print length($1)}'' $parts_indb|sort -n|tail -1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$part_name_length" -eq 11 '||chr(38)||''||chr(38)||' "$hourly" == "0" || "$part_name_length" -eq 9 '||chr(38)||''||chr(38)||' "$hourly" == "1" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'needrebuild="yes"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'min_part_indb='||chr(96)||'head -1 $parts_indb|awk ''{print substr($1,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'max_part_indb='||chr(96)||'tail -1 $parts_indb|awk ''{print substr($1,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'historylife=$datalife
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $target == "alert" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$hourly" == "1" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'historylife=$alert_datalife_hourly
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'historylife=$alert_datalife_daily
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'forwardlife=$datalife_hourly_forward
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$hourly" == "0" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'forwardlife=$datalife_daily_forward
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$hourly" == "0" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'expr $historylife - 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpcheckdate='||chr(96)||'echo $checkdate|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'target_part_min='||chr(96)||'sh calc_date_ndays $tmpcheckdate -$tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'expr $forwardlife - 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'target_part_max='||chr(96)||'sh calc_date_ndays $tmpcheckdate $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo min part in db: $min_part_indb , max part in db: $max_part_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo min part target: $target_part_min , max part target: $target_part_max
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$min_part_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ "$tmpstr" -lt "$target_part_min" ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name drop partition p$tmpstr '||chr(59)||'" >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'sh calc_date_tomorrow $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$max_part_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'sh calc_date_tomorrow $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ "$tmpstr" -le "$target_part_max" ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmptomorrow='||chr(96)||'sh calc_date_tomorrow $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name add partition p$tmpstr values less than (to_date(''$tmptomorrow'',''yyyymmdd''))'||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$tmptomorrow
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$target_part_max
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'sh calc_date_tomorrow $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ "$tmpstr" -le "$max_part_indb" ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name drop partition p$tmpstr '||chr(59)||'" >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'sh calc_date_tomorrow $tmpstr'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'expr $historylife - 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $checkdate|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $checkdate|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $i -lt "$tmpstr" ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour - 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$tmphour" -lt 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=23
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_ndays $tmpdate -1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour="0"$tmphour
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'target_part_min="${tmpdate}${tmphour}"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr='||chr(96)||'expr $forwardlife - 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $checkdate|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $checkdate|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $i -lt "$tmpstr" ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[  $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'i='||chr(96)||'expr $i + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour="0"$tmphour
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'target_part_max="${tmpdate}${tmphour}"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$min_part_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $tmpstr -lt $target_part_min ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name drop partition p$tmpstr '||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0"$tmphour"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr="${tmpdate}${tmphour}"
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$max_part_indb
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=${tmpdate}${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $tmpstr -le $target_part_max ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpnexthour=${tmpdate}${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name add partition p$tmpstr values less than (to_date(''$tmpnexthour'',''yyyymmddhh24''))'||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$tmpnexthour
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$target_part_max
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=${tmpdate}${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'while [[ $tmpstr -le $max_part_indb ]]'||chr(59)||'do
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "alter table $table_name drop partition p$tmpstr '||chr(59)||'">>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'echo $tmpstr|awk ''{print substr($1,9,2)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'echo $tmpstr|awk ''{print substr($1,1,8)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour='||chr(96)||'expr $tmphour + 1'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour == 24 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpdate='||chr(96)||'sh calc_date_tomorrow $tmpdate'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ $tmphour -lt 10 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmphour=0${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpnexthour=${tmpdate}${tmphour}
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'tmpstr=$tmpnexthour
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi '||chr(35)||'needrebuild if
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi '||chr(35)||' needrebuild if
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||''||chr(35)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$needrebuild" == "yes" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'new_table_name=${table_name}_${RANDOM}_'||chr(96)||'date +"'||chr(37)||'y'||chr(37)||'m'||chr(37)||'d'||chr(37)||'H"'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'new_table_name='||chr(96)||'echo $new_table_name|awk ''{print substr($1,1,30)}'''||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo "rename $table_name to $new_table_name '||chr(59)||'" >>$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo Checking indexes definition.
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo ""
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ "$debug" == "no" ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set echo on
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'@$sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn <<'||chr(33)||' |grep "xXxXx"|awk ''{if(NF==2)print "alter index "$1" rebuild'||chr(59)||'"'||chr(59)||'}''>$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set lines 125
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set pages 9999
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set feedback off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'set heading off
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'select index_name,''xXxXx'' from user_indexes
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'where status=''UNUSABLE'''||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'if [[ '||chr(96)||'cat $tmpfile|wc -l|awk ''{print $1}'''||chr(96)||' -gt 0 ]]'||chr(59)||'then
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'$db_conn<<'||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'@$tmpfile
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'exit'||chr(59)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||''||chr(33)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'else
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'cat $sqlscript
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'fi
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'rm ${tmpfile}*
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'done
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'_end_time='||chr(96)||'date +"'||chr(37)||'s"'||chr(96)||'
  2  ' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> update file_crontab_command_files set content=content||'echo '||chr(96)||'expr $_end_time - $_start_time'||chr(96)||'' where host_name='ls1' and check_time='20130426080000' and filename='maindatalife' and path='/smartmon/maindatalife' ;

1 row updated.

SQL> 	 	commit;

Commit complete.

SQL> 		spool off
